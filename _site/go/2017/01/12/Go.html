<!DOCTYPE html>
<html>
  <head>
    <title>Go语言编程 – Michael – Developer</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="Go Programe Language" />
    <meta property="og:description" content="Go Programe Language" />
    
    <meta name="author" content="Michael" />

    
    <meta property="og:title" content="Go语言编程" />
    <meta property="twitter:title" content="Go语言编程" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Michael - Developer" href="/feed.xml" />
    <link rel="shortcut icon" href="/images/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css"/>
  </head>

  <body>

    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="/images/favicon.ico" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Michael</a></h1>
            <p class="site-description">Developer</p>
          </div>

          <nav>
            <a href="/"><i class="fa fa-home fa-2x"></i></a>
            <a href="/category"><i class="fa fa-tags fa-2x" aria-hidden="true"></i></a>
            <a href="/about"><i class="fa fa-user-secret fa-2x"></i></a>
            <a href="/blog"><i class="fa fa-university fa-2x"></i></a>
            <!-- <a href="/task"><i class="fa fa-book fa-2x" aria-hidden="true"></i></a> -->
            <a href="/feed.xml" target="_blank"><i class="fa fa-feed fa-2x"></i></a>

            <!-- 
            
              
            
              
            
              
              <a href="/" >
                Home
              </a>
              
            
              
              <a href="/blog" >
                Blog
              </a>
              
            
              
              <a href="/category" >
                Category
              </a>
              
             -->
          </nav>

          <a href="https://github.com/MichaelYgZhang" target="_blank">
            <img class="fork-me-on-github" src="/images/fork-me-on-github.png" alt="Fork me on GitHub">
          </a>
        </header>

        <div id="search-container">
          <input type="text" id="search-input" placeholder="search...">
          <ul id="results-container"></ul>
        </div>

      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="post">
  <div class="post">
    <h1 class="post-title">Go语言编程</h1>
    <span class="post-date">2017-01-12</span>
    <!--  |
    
     -->
    <article>
      <h4 id="第1章-初始go语言">第1章 初始Go语言</h4>

<ul>
  <li>贝尔实验室-Limbo编程语言-Go</li>
  <li>2012年第一个正式版本Go发布Google开源</li>
  <li>语言特性
    <ul>
      <li>GC</li>
      <li>丰富的内置类型 (简单内置类型，字典类型map,新增数据类型：数组切片(Slice),减少导入包)</li>
      <li>函数多个返回值</li>
    </ul>
  </li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="x">  </span><span class="k">func</span><span class="x"> </span><span class="n">getName</span><span class="p">()(</span><span class="n">firstName</span><span class="p">,</span><span class="x"> </span><span class="n">middleName</span><span class="p">,</span><span class="x"> </span><span class="n">lastName</span><span class="p">,</span><span class="x"> </span><span class="n">nickName</span><span class="x"> </span><span class="kt">string</span><span class="p">){</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="s">"May"</span><span class="p">,</span><span class="x"> </span><span class="s">"M"</span><span class="p">,</span><span class="x"> </span><span class="s">"Chen"</span><span class="p">,</span><span class="x"> </span><span class="s">"Babe"</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="n">fn</span><span class="p">,</span><span class="x"> </span><span class="n">mn</span><span class="p">,</span><span class="x"> </span><span class="n">ln</span><span class="p">,</span><span class="x"> </span><span class="n">nn</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">getName</span><span class="p">()</span><span class="x">
  </span><span class="c">// _, _, lastName, _ := getName()</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>错误处理 (defer, panic, recover,可以减少代码量无需try-catch,方便阅读和维护)</li>
  <li>匿名函数和闭包</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="x">  </span><span class="n">f</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="x"> </span><span class="n">y</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="kt">int</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">x</span><span class="x"> </span><span class="o">+</span><span class="err">　</span><span class="n">y</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>类型和接口(不支持继承和重载,支持基本类型组合功能)</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="c">//比如java在实现一个接口之前必须先定义该接口，并且将类型和接口紧密绑定，即接口的修改会影响到所有实现类,GO的接口体系避免了这类问题</span><span class="x">
  </span><span class="k">type</span><span class="x"> </span><span class="n">Bird</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">// ....</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">b</span><span class="x"> </span><span class="o">*</span><span class="n">Bird</span><span class="p">)</span><span class="x"> </span><span class="n">Fly</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">//以鸟的方式飞行</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="k">type</span><span class="x"> </span><span class="n">IFly</span><span class="x"> </span><span class="k">interface</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="n">Fly</span><span class="p">()</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">var</span><span class="x"> </span><span class="n">fly</span><span class="x"> </span><span class="n">IFly</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="nb">new</span><span class="x"> </span><span class="p">(</span><span class="n">Bird</span><span class="p">)</span><span class="x">
    </span><span class="n">fly</span><span class="o">.</span><span class="n">Fly</span><span class="p">()</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="c">//虽然Bird类型实现的时候没有生命与接口IFly的关系，但接口和类型可以直接转换，甚至接口的定义都不用在类型定义之前，这种比较松散的对应关系可以大幅降低因为接口调整而导致的大量代码调整工作。  </span><span class="x">
</span></code></pre>
</div>
<ul>
  <li>并发编程
    <ul>
      <li>goroutine:使得并发编程非常简单。使用gorutine而不是裸用操作系统的并发机制，以及使用消息传递来共享内存而不是使用共享内存来通信。<a href="https://my.oschina.net/xinxingegeya/blog/364693"></a>
goroutine是一种比线程更轻盈、省资源的协程。使用关键字go执行。</li>
    </ul>
  </li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="x">  </span><span class="c">//goroutine和channel实例,两个goroutine并行累加计算，待两个计算过程完成后打印计算结果</span><span class="x">
  </span><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">
  </span><span class="k">import</span><span class="x"> </span><span class="s">"fmt"</span><span class="x">
  </span><span class="k">func</span><span class="x"> </span><span class="n">sum</span><span class="p">(</span><span class="n">values</span><span class="x"> </span><span class="p">[]</span><span class="x"> </span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="n">resultChan</span><span class="x"> </span><span class="k">chan</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">sum</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">0</span><span class="x">
    </span><span class="k">for</span><span class="x"> </span><span class="n">_</span><span class="p">,</span><span class="x"> </span><span class="n">value</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">values</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="n">sum</span><span class="x"> </span><span class="o">+=</span><span class="x"> </span><span class="n">value</span><span class="x">
    </span><span class="p">}</span><span class="x">
    </span><span class="n">resultChan</span><span class="x"> </span><span class="o">&lt;-</span><span class="x"> </span><span class="n">sum</span><span class="x"> </span><span class="c">//将计算结果发送到channel中</span><span class="x">
  </span><span class="p">}</span><span class="x">

  </span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="x"> </span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">values</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="p">[]</span><span class="x"> </span><span class="kt">int</span><span class="p">{</span><span class="m">1</span><span class="p">,</span><span class="x"> </span><span class="m">2</span><span class="p">,</span><span class="x"> </span><span class="m">3</span><span class="p">,</span><span class="x"> </span><span class="m">4</span><span class="p">,</span><span class="x"> </span><span class="m">5</span><span class="p">,</span><span class="x"> </span><span class="m">6</span><span class="p">,</span><span class="x"> </span><span class="m">7</span><span class="p">,</span><span class="x"> </span><span class="m">8</span><span class="p">,</span><span class="x"> </span><span class="m">9</span><span class="p">,</span><span class="x"> </span><span class="m">10</span><span class="p">}</span><span class="x">
    </span><span class="n">resultChan</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">(</span><span class="k">chan</span><span class="x"> </span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="m">2</span><span class="p">)</span><span class="x">
    </span><span class="k">go</span><span class="x"> </span><span class="n">sum</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="o">:</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="o">/</span><span class="m">2</span><span class="p">],</span><span class="x"> </span><span class="n">resultChan</span><span class="p">)</span><span class="x">
    </span><span class="k">go</span><span class="x"> </span><span class="n">sum</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="nb">len</span><span class="p">[(</span><span class="n">values</span><span class="p">)</span><span class="o">/</span><span class="m">2</span><span class="p">]</span><span class="o">:</span><span class="p">],</span><span class="x"> </span><span class="n">resultChan</span><span class="p">)</span><span class="x">
    </span><span class="n">sum1</span><span class="p">,</span><span class="x"> </span><span class="n">sum2</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&lt;-</span><span class="n">resultChan</span><span class="p">,</span><span class="x"> </span><span class="o">&lt;-</span><span class="n">resultChan</span><span class="x"> </span><span class="c">//接收结果</span><span class="x">
    </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Result:"</span><span class="p">,</span><span class="x"> </span><span class="n">sum1</span><span class="p">,</span><span class="x"> </span><span class="n">sum2</span><span class="p">,</span><span class="x"> </span><span class="n">sum1</span><span class="x"> </span><span class="o">+</span><span class="x"> </span><span class="n">sum2</span><span class="p">)</span><span class="x">
  </span><span class="p">}</span><span class="x">

</span></code></pre>
</div>

<ul>
  <li>
    <p>反射(反射最常见的使用场景是做对象的序列化（serialization，有时候也叫Marshal &amp; Unmarshal）。例如，Go语言标准库的encoding/json、encoding/xml、encoding/gob、encoding/binary等包就大量依赖于反射功能来实现。)</p>
  </li>
  <li>
    <p>语言交互性 (Cgo指的是与C语言的混合特性与Java的JNI不同,更简单)</p>
  </li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="x">    </span><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">
    </span><span class="c">/*
    #include &lt;stdio.h&gt;
    */</span><span class="x">
    </span><span class="k">import</span><span class="x"> </span><span class="s">"C"</span><span class="x">
    </span><span class="k">import</span><span class="x"> </span><span class="s">"unsafe"</span><span class="x">
    </span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="x"> </span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="n">cstr</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">C</span><span class="o">.</span><span class="n">CString</span><span class="p">(</span><span class="s">"Hello, word"</span><span class="p">)</span><span class="x">
      </span><span class="n">C</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="n">cstr</span><span class="p">)</span><span class="x">
      </span><span class="n">C</span><span class="o">.</span><span class="n">free</span><span class="p">(</span><span class="n">unsafe</span><span class="o">.</span><span class="n">Pointer</span><span class="p">(</span><span class="n">cstr</span><span class="p">))</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>Go Helloword</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="x">  </span><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">   </span><span class="c">//所属包</span><span class="x">
  </span><span class="k">import</span><span class="x"> </span><span class="s">"fmt"</span><span class="x">   </span><span class="c">// 导入依赖包,不得导入没有使用到的包,否则Go便以其器报编译错误</span><span class="x">
  </span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="x"> </span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x"> </span><span class="c">//可执行入口</span><span class="x">
    </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Hello, world"</span><span class="p">)</span><span class="x">
  </span><span class="p">}</span><span class="x">

  </span><span class="c">//Go 函数定义</span><span class="x">
  </span><span class="k">func</span><span class="x"> </span><span class="n">函数名</span><span class="x"> </span><span class="p">(</span><span class="n">参数列表</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">返回值列表</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">//函数体</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="k">func</span><span class="x"> </span><span class="n">Comput</span><span class="x"> </span><span class="p">(</span><span class="n">value</span><span class="x"> </span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="n">value2</span><span class="x"> </span><span class="kt">float64</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">result</span><span class="x"> </span><span class="kt">float64</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="c">//函数体</span><span class="x">
  </span><span class="p">}</span><span class="x">

  </span><span class="c">//go 注释</span><span class="x">
  </span><span class="c">/*
  块注释
  */</span><span class="x">
  </span><span class="c">// 行注释</span><span class="x">
  </span><span class="c">//Go没有分号</span><span class="x">
  </span><span class="c">//左花括号 { 不允许另起一行放置</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>Go版本-编译-运行
    <ul>
      <li>$ go version  # go version go1</li>
      <li>$ go run hello.go # 直接运行(编译、链接、运行合为一步,不会产生中间文件盒可执行文件)</li>
      <li>$ go build hello.go</li>
      <li>$ ./hello</li>
      <li>go test  xxx</li>
    </ul>
  </li>
  <li><a href="http://github.com/wonderfo/wonderfogo/wiki">Go资料</a></li>
</ul>

<h4 id="第2章-顺序编程">第2章 顺序编程</h4>

<ul>
  <li>变量</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="x">  </span><span class="k">var</span><span class="x"> </span><span class="n">v1</span><span class="x"> </span><span class="kt">int</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">v2</span><span class="x"> </span><span class="kt">string</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">v3</span><span class="x"> </span><span class="p">[</span><span class="m">10</span><span class="p">]</span><span class="kt">int</span><span class="x">  </span><span class="c">//数组</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">v4</span><span class="x"> </span><span class="p">[]</span><span class="kt">int</span><span class="x">    </span><span class="c">//数组切片</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">v5</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">f</span><span class="x"> </span><span class="kt">int</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">v6</span><span class="x"> </span><span class="o">*</span><span class="kt">int</span><span class="x">   </span><span class="c">//指针</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">v7</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="x">  </span><span class="c">//map, key为string类型,value为int类型</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">v8</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="n">a</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="kt">int</span><span class="x">

  </span><span class="k">var</span><span class="x"> </span><span class="p">(</span><span class="x">
    </span><span class="n">v1</span><span class="x"> </span><span class="kt">int</span><span class="x">
    </span><span class="n">v2</span><span class="x"> </span><span class="kt">string</span><span class="x">
  </span><span class="p">)</span><span class="x">

  </span><span class="c">//初始化</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">v1</span><span class="x"> </span><span class="kt">int</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">10</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">v2</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">10</span><span class="x">   </span><span class="c">//编译器可以推导出v2类型</span><span class="x">
  </span><span class="n">v3</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">10</span><span class="x">      </span><span class="c">//编译器可以推导出v2类型</span><span class="x">
  </span><span class="c">//注意: 出现在:=左侧的变量不应该是已经被声明过的，否则会导致编译错误</span><span class="x">

  </span><span class="c">//变量赋值</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">v10</span><span class="x"> </span><span class="kt">int</span><span class="x">
  </span><span class="n">v10</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">123</span><span class="x">
  </span><span class="c">//多重赋值</span><span class="x">
  </span><span class="n">i</span><span class="p">,</span><span class="x"> </span><span class="n">j</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">j</span><span class="p">,</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="c">//交换i和j变量,否则需要引入中间变量才能交换,比如 t = i; i = j; j = t;  使用得到可以减少代码行数</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>常量编译期间就已知且不可改变的值。常量可以使整型、浮点和复数、布尔、字符串类型</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="x">  </span><span class="c">//常量定义</span><span class="x">
  </span><span class="k">const</span><span class="x"> </span><span class="n">PI</span><span class="x"> </span><span class="kt">float64</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">3.1415926</span><span class="x">
  </span><span class="k">const</span><span class="x"> </span><span class="n">zero</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">0.0</span><span class="x">    </span><span class="c">//无类型浮点常量</span><span class="x">
  </span><span class="k">const</span><span class="x"> </span><span class="p">(</span><span class="x">
    </span><span class="n">size</span><span class="x"> </span><span class="kt">int64</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">1024</span><span class="x">
    </span><span class="n">eof</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="o">-</span><span class="m">1</span><span class="x">
  </span><span class="p">)</span><span class="x">
  </span><span class="k">const</span><span class="x"> </span><span class="n">u</span><span class="p">,</span><span class="x"> </span><span class="n">v</span><span class="x"> </span><span class="kt">float32</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">0</span><span class="p">,</span><span class="x"> </span><span class="m">3</span><span class="x"> </span><span class="c">//u=0.0, v=3.0 多重赋值</span><span class="x">
  </span><span class="k">const</span><span class="x"> </span><span class="n">a</span><span class="p">,</span><span class="x"> </span><span class="n">b</span><span class="p">,</span><span class="x"> </span><span class="n">c</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">3</span><span class="p">,</span><span class="x"> </span><span class="m">4</span><span class="p">,</span><span class="x"> </span><span class="s">"foo"</span><span class="x"> </span><span class="c">//a=3, b=4, c="foo"</span><span class="x">
  </span><span class="k">const</span><span class="x"> </span><span class="n">mask</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">1</span><span class="x"> </span><span class="o">&lt;&lt;</span><span class="x"> </span><span class="m">3</span><span class="x">
  </span><span class="c">//注意:常量的赋值是一个编译期行为,所以右值不能出现任何需要运行期才能得出结果的表达式</span><span class="x">
  </span><span class="k">const</span><span class="x"> </span><span class="n">Home</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">os</span><span class="o">.</span><span class="n">GetEnv</span><span class="p">(</span><span class="s">"Home"</span><span class="p">)</span><span class="x"> </span><span class="c">//编译错误</span><span class="x">

  </span><span class="c">//预定义常量 : true、false、1ota(可被编译器修改的常量,在么一个const关键字出现时被重置为0，然后在下一个const出现之前，每出现一次1ota，其所代表的数字自动增1)</span><span class="x">
  </span><span class="k">const</span><span class="x"> </span><span class="p">(</span><span class="x">           </span><span class="c">// 1ota被重设置为0</span><span class="x">
    </span><span class="n">c0</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">1</span><span class="n">ota</span><span class="x">       </span><span class="c">// c0 == 0</span><span class="x">
    </span><span class="n">c1</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">1</span><span class="n">ota</span><span class="x">       </span><span class="c">// c1 == 1</span><span class="x">
    </span><span class="n">c2</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">1</span><span class="n">ota</span><span class="x">       </span><span class="c">// c2 == 2</span><span class="x">
  </span><span class="p">)</span><span class="x">
  </span><span class="c">//如果两个const的赋值语句的表达式是一样的，那么可以省略后一个赋值表达式。因此，上面的语句可以简写为:</span><span class="x">
  </span><span class="k">const</span><span class="x"> </span><span class="p">(</span><span class="x">           </span><span class="c">// 1ota被重设置为0</span><span class="x">
    </span><span class="n">c0</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">1</span><span class="n">ota</span><span class="x">       </span><span class="c">// c0 == 0</span><span class="x">
    </span><span class="n">c1</span><span class="x">              </span><span class="c">// c1 == 1</span><span class="x">
    </span><span class="n">c2</span><span class="x">              </span><span class="c">// c2 == 2</span><span class="x">
  </span><span class="p">)</span><span class="x">
</span><span class="c">// 枚举</span><span class="x">
  </span><span class="k">const</span><span class="x"> </span><span class="p">(</span><span class="x">
    </span><span class="n">Sumday</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">1</span><span class="n">ota</span><span class="x">
    </span><span class="n">Monday</span><span class="x">
    </span><span class="n">Tuesday</span><span class="x">
    </span><span class="n">Wednesday</span><span class="x">
    </span><span class="n">Thursday</span><span class="x">
    </span><span class="n">Friday</span><span class="x">
    </span><span class="n">Staturday</span><span class="x">
    </span><span class="n">numberOfDays</span><span class="x">
    </span><span class="c">//以大写字母开头的常量在包外可见,以上例子中numberOfDays为包内私有,其他符号则可被其他包访问</span><span class="x">
  </span><span class="p">)</span><span class="x">  

</span></code></pre>
</div>

<ul>
  <li>类型
    <ul>
      <li>布尔类型 : bool</li>
      <li>整型: int8、byte、int16、int、uint、uintptr等</li>
      <li>浮点类型: float32、float64</li>
      <li>复数类型: complex64、complex128</li>
      <li>字符串: string</li>
      <li>字符类型: rune</li>
      <li>错误类型: error</li>
      <li>复合类型:
        <ul>
          <li>指针 pointer</li>
          <li>数组 array</li>
          <li>切片 slice</li>
          <li>字典 map</li>
          <li>通道 chan</li>
          <li>结构体 struct</li>
          <li>接口 interface</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>布尔类型:</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="x">  </span><span class="k">var</span><span class="x"> </span><span class="n">v1</span><span class="x"> </span><span class="kt">bool</span><span class="x">
  </span><span class="n">v1</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="no">true</span><span class="x">
  </span><span class="n">v2</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="p">(</span><span class="m">1</span><span class="x"> </span><span class="o">==</span><span class="x"> </span><span class="m">2</span><span class="p">)</span><span class="x">  </span><span class="c">//v2 也会被推导为bool类型</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>整型</li>
  <li>浮点数</li>
  <li>复数类型</li>
  <li>字符串</li>
  <li>数组</li>
  <li>map</li>
  <li>流程控制
    <ul>
      <li>选择</li>
      <li>循环</li>
      <li>跳转</li>
      <li>条件语句  if、else和else if</li>
      <li>选择语句  switch， case select</li>
      <li>循环语句  for和range</li>
      <li>跳转语句 goto</li>
    </ul>
  </li>
  <li>循环语句</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="x">  </span><span class="n">sum</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">0</span><span class="x">
  </span><span class="k">for</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">0</span><span class="p">;</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="m">10</span><span class="p">;</span><span class="x"> </span><span class="n">i</span><span class="o">++</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="n">sum</span><span class="x"> </span><span class="o">+=</span><span class="x"> </span><span class="m">1</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="c">//无限循环</span><span class="x">
  </span><span class="n">sum</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">0</span><span class="x">
  </span><span class="k">for</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">sum</span><span class="o">++</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="n">sum</span><span class="x"> </span><span class="o">&gt;</span><span class="x"> </span><span class="m">100</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="k">break</span><span class="x">
    </span><span class="p">}</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="c">// 除了支持continue和break，还有更高级的break</span><span class="x">
</span><span class="k">for</span><span class="x"> </span><span class="n">j</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">0</span><span class="p">;</span><span class="x"> </span><span class="n">j</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="m">5</span><span class="p">;</span><span class="x"> </span><span class="n">j</span><span class="o">++</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">for</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">0</span><span class="p">;</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="m">10</span><span class="p">;</span><span class="x"> </span><span class="n">i</span><span class="o">++</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="k">if</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">&gt;</span><span class="x"> </span><span class="m">5</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="k">break</span><span class="x"> </span><span class="n">JLoop</span><span class="x">
      </span><span class="p">}</span><span class="x">
      </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">  

</span><span class="n">JLoop</span><span class="o">:</span><span class="x">
</span><span class="c">//... break语句终止的是JLoop标签处的外层循环</span><span class="x">

</span></code></pre>
</div>

<ul>
  <li>跳转语句 goto</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="k">func</span><span class="x"> </span><span class="n">myFunc</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">i</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">0</span><span class="x">
  </span><span class="n">HERE</span><span class="o">:</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="x">
  </span><span class="n">i</span><span class="o">++</span><span class="x">
  </span><span class="k">if</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="m">10</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">goto</span><span class="x"> </span><span class="n">HERE</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>函数</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="k">func</span><span class="x"> </span><span class="n">Add</span><span class="p">(</span><span class="n">a</span><span class="x"> </span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="n">b</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">ret</span><span class="x"> </span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">if</span><span class="x"> </span><span class="n">a</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="m">0</span><span class="x"> </span><span class="o">||</span><span class="x"> </span><span class="n">b</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="m">0</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">err</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">errors</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="s">"Should be non-negative numbers!"</span><span class="p">)</span><span class="x">
    </span><span class="k">return</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="k">return</span><span class="x"> </span><span class="n">a</span><span class="x"> </span><span class="o">+</span><span class="x"> </span><span class="n">b</span><span class="p">,</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="c">// 支持多重返回值</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="c">//函数调用</span><span class="x">
</span><span class="c">//....</span><span class="x">
</span><span class="k">import</span><span class="x"> </span><span class="s">"mymath"</span><span class="x">  </span><span class="c">//假设Add被放在 mymath包中</span><span class="x">
</span><span class="n">c</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">mymath</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="x"> </span><span class="m">2</span><span class="p">)</span><span class="x">

</span></code></pre>
</div>

<h5 id="注意-小写字母开头的函数只在本包内可见大写字母开头的函数才能被其他包使用这个规则也同样适用于类型和变量的可见性">注意: 小写字母开头的函数只在本包内可见，大写字母开头的函数才能被其他包使用。这个规则也同样适用于类型和变量的可见性。</h5>

<ul>
  <li>不定参数</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="k">func</span><span class="x"> </span><span class="n">myfunc</span><span class="p">(</span><span class="n">args</span><span class="x"> </span><span class="o">...</span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="k">for</span><span class="x"> </span><span class="n">_</span><span class="p">,</span><span class="x"> </span><span class="n">arg</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">args</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span><span class="x">
	</span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="c">//任意类型的不定参数</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="n">Print</span><span class="p">(</span><span class="n">format</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">args</span><span class="x"> </span><span class="o">...</span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="c">//....</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>
    <p>多返回值</p>
  </li>
  <li>
    <p>匿名函数与闭包</p>
  </li>
  <li>闭包：闭包是可以包含自由(未绑定到特定对象)变量的代码块，这些变量不再这个代码块内或者任何全局上下文中定义，而是在定义代码块的环境中定义。要执行的代码块(由于自由变量包含在代码块中，所以这些自由变量以及他们引用的对象没有被释放)为自由变量提供绑定的计算环境(作用域)。</li>
  <li>闭包的价值:在于可以作为函数对象或者匿名函数，对于类型系统而言，这意味着不仅要表示数据还要表示代码。支持闭包的多数语言都将函数作为第一级对象，就是说这些函数可以存储到变量中作为参数传递给其他函数，最重要的是能够被函数动态创建和返回。</li>
  <li>错误处理
    <ul>
      <li>error接口</li>
      <li>defer</li>
    </ul>
  </li>
  <li>panic(), recover()</li>
</ul>

<h4 id="第3章-面向对象编程">第3章 面向对象编程</h4>

<ul>
  <li>类型系统</li>
  <li>结构体 struct</li>
  <li>匿名组合</li>
  <li>可见性  可见大写字母开头。</li>
  <li>接口
    <ul>
      <li>接口赋值有两种情况:
        <ol>
          <li>将对象实例赋值给接口</li>
          <li>将一个接口赋值给另一个接口</li>
        </ol>
      </li>
    </ul>
  </li>
  <li>接口查询</li>
  <li>类型查询</li>
  <li>接口组合</li>
  <li>Any类型</li>
  <li>TODO Finshed MusicsPlayer</li>
</ul>

<h4 id="第4章-并发编程">第4章 并发编程</h4>

<ul>
  <li>多进程，多线程，基于回调的非阻塞/异步IO，协程</li>
  <li>在工程上常见的两种并发通信模式:  共享内存系统、消息传递系统</li>
  <li>CSP commnicating sequential processes</li>
  <li>基本语法</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="k">var</span><span class="x"> </span><span class="n">chanName</span><span class="x"> </span><span class="k">chan</span><span class="x"> </span><span class="n">ElementType</span><span class="x">
</span><span class="k">var</span><span class="x"> </span><span class="n">ch</span><span class="x"> </span><span class="k">chan</span><span class="x"> </span><span class="kt">int</span><span class="x"> </span><span class="c">//比如int类型的channel</span><span class="x">
</span><span class="k">var</span><span class="x"> </span><span class="n">m</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="x"> </span><span class="k">chan</span><span class="x"> </span><span class="kt">bool</span><span class="x"> </span><span class="c">//一个map元素是bool类型的channel</span><span class="x">
</span><span class="n">ch</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">(</span><span class="k">chan</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="c">//定义一个channel，int类型</span><span class="x">
</span><span class="n">ch</span><span class="x"> </span><span class="o">&lt;-</span><span class="x"> </span><span class="n">value</span><span class="x">   </span><span class="c">//将一个数据写入(发送)至channel的语法，向channel中写入数据通常会导致程序阻塞直到有其他gorutine从这个channel中读取数据</span><span class="x">
</span><span class="n">value</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&lt;-</span><span class="n">ch</span><span class="x"> </span><span class="c">//从channel中读取数据，如果channel之前没有写入数据，那么从channel中读取数据也会导致程序阻塞，导致channel中被写入数据为止</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>select</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="k">select</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">case</span><span class="x"> </span><span class="o">&lt;-</span><span class="n">chanl</span><span class="o">:</span><span class="x">
    </span><span class="c">//如果chanl成功读到数据，则记性该case处理语句</span><span class="x">
  </span><span class="k">case</span><span class="x"> </span><span class="n">chan2</span><span class="x"> </span><span class="o">&lt;-</span><span class="x"> </span><span class="m">1</span><span class="o">:</span><span class="x">
    </span><span class="c">//如果成功向chann2写入数据，则进行该case处理语句</span><span class="x">
  </span><span class="k">default</span><span class="o">:</span><span class="x">
    </span><span class="c">//如果上面都没有成功，则进行default处理流程</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>缓冲机制，传输大量数据以达到消息队列的效果</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="n">c</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">(</span><span class="k">chan</span><span class="x"> </span><span class="kt">int</span><span class="p">,</span><span class="x"> </span><span class="m">1024</span><span class="p">)</span><span class="x"> </span><span class="c">//make第二个参数就是缓冲区大小，这种情况，即使没有读取方，写入方也可以一直往channel里写入，在缓冲区被填完之前都不会阻塞</span><span class="x">
</span><span class="k">for</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">c</span><span class="x"> </span><span class="p">{</span><span class="x">  </span><span class="c">//读取缓冲区channel数据</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Received:"</span><span class="p">,</span><span class="x"> </span><span class="n">i</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>超时机制</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="n">timeouot</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">(</span><span class="k">chan</span><span class="x"> </span><span class="kt">bool</span><span class="p">,</span><span class="x"> </span><span class="m">1</span><span class="p">)</span><span class="x">
</span><span class="k">go</span><span class="x"> </span><span class="k">func</span><span class="p">(){</span><span class="x">  </span><span class="c">//执行一个匿名超时等待函数</span><span class="x">
  </span><span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="m">1e9</span><span class="p">)</span><span class="x"> </span><span class="c">//等待1s</span><span class="x">
  </span><span class="n">timeouot</span><span class="x"> </span><span class="o">&lt;-</span><span class="x"> </span><span class="no">true</span><span class="x">
</span><span class="p">}{}</span><span class="x">

</span><span class="k">select</span><span class="x"> </span><span class="p">{</span><span class="x">
</span><span class="k">case</span><span class="x"> </span><span class="o">&lt;-</span><span class="x"> </span><span class="n">ch</span><span class="o">:</span><span class="x">
  </span><span class="c">//从ch中读取到数据</span><span class="x">
</span><span class="k">case</span><span class="x"> </span><span class="o">&lt;-</span><span class="x"> </span><span class="n">timeouot</span><span class="o">:</span><span class="x">
  </span><span class="c">//一直没有从ch中读取到数据，但从timeouot中读取到了数据  </span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>channel的传递</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="k">type</span><span class="x"> </span><span class="n">PipeData</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">value</span><span class="x"> </span><span class="kt">int</span><span class="x">
  </span><span class="n">handler</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="kt">int</span><span class="x">
  </span><span class="n">next</span><span class="x"> </span><span class="k">chan</span><span class="x"> </span><span class="kt">int</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">handle</span><span class="p">(</span><span class="n">queue</span><span class="x"> </span><span class="k">chan</span><span class="x"> </span><span class="o">*</span><span class="n">PipeData</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">for</span><span class="x"> </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">queue</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">data</span><span class="o">.</span><span class="n">next</span><span class="x"> </span><span class="o">&lt;-</span><span class="x"> </span><span class="n">data</span><span class="o">.</span><span class="n">handler</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>单向channel</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="k">var</span><span class="x"> </span><span class="n">ch1</span><span class="x"> </span><span class="k">chan</span><span class="x"> </span><span class="kt">int</span><span class="x">  </span><span class="c">//normal channel</span><span class="x">
</span><span class="k">var</span><span class="x"> </span><span class="n">ch2</span><span class="x"> </span><span class="k">chan</span><span class="o">&lt;-</span><span class="x"> </span><span class="kt">float64</span><span class="x"> </span><span class="c">//单向channel只用于写float64数据</span><span class="x">
</span><span class="k">var</span><span class="x"> </span><span class="n">ch3</span><span class="x"> </span><span class="o">&lt;-</span><span class="k">chan</span><span class="x"> </span><span class="kt">int</span><span class="x">  </span><span class="c">//ch3单向channel，只用于读取int数据</span><span class="x">
</span><span class="n">ch4</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">(</span><span class="k">chan</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x">
</span><span class="n">ch5</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&lt;-</span><span class="k">chan</span><span class="x"> </span><span class="kt">int</span><span class="x"> </span><span class="p">(</span><span class="n">ch4</span><span class="p">)</span><span class="x"> </span><span class="c">//ch5就是一个党项读取channel</span><span class="x">
</span><span class="n">ch6</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">chan</span><span class="o">&lt;-</span><span class="x"> </span><span class="kt">int</span><span class="x"> </span><span class="p">(</span><span class="n">ch4</span><span class="p">)</span><span class="x"> </span><span class="c">//ch6是一个单向写入channel</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">Parse</span><span class="x"> </span><span class="p">(</span><span class="n">ch</span><span class="x"> </span><span class="o">&lt;-</span><span class="k">chan</span><span class="x"> </span><span class="kt">int</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">for</span><span class="x"> </span><span class="n">value</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">ch</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Parsing value"</span><span class="p">,</span><span class="x"> </span><span class="n">value</span><span class="p">)</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>
    <p>关闭channel，cloose(ch),如何判断一个channel是否已被关闭 x, ok := &lt;-ch</p>
  </li>
  <li>多核并行化</li>
  <li>出让时间片，我们可以再每个goroutine中控制何时主动出让时间片给其他goroutine，可以使用runtime包中的Gosched()函数实现</li>
  <li>同步
    <ul>
      <li>同步锁,Go语言包中的sync包提供两种锁类型: sync.Mutex和sync.RWMutex; 当一个goroutine获得了Mutex后，其他goroutine就只能等这个goroutine释放该Mutex,RWMutex相对好一些,单写多读锁模型。RWMutex类型其实组合了Mutex</li>
    </ul>
  </li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="c">//锁的典型用法</span><span class="x">
</span><span class="k">var</span><span class="x"> </span><span class="n">lock</span><span class="x"> </span><span class="n">sync</span><span class="o">.</span><span class="n">Mutex</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="n">foo</span><span class="x"> </span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">lock</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span><span class="x">
  </span><span class="k">defer</span><span class="x"> </span><span class="n">lock</span><span class="o">.</span><span class="n">Unlock</span><span class="p">()</span><span class="x">
  </span><span class="c">//...</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>全局唯一性操作只需要运行一次的代码</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="k">var</span><span class="x"> </span><span class="n">a</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="k">var</span><span class="x"> </span><span class="n">once</span><span class="x"> </span><span class="n">sync</span><span class="o">.</span><span class="n">one</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="n">setup</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">a</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"Hello,world"</span><span class="x">
</span><span class="p">}</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="n">doprint</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">once</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">setup</span><span class="p">)</span><span class="x">  </span><span class="c">//保证setup只调用一次</span><span class="x">
  </span><span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="n">twoprint</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">go</span><span class="x"> </span><span class="n">doprint</span><span class="p">()</span><span class="x">
  </span><span class="k">go</span><span class="x"> </span><span class="n">doprint</span><span class="p">()</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>完整示例 TODO finished。</li>
</ul>

<h4 id="第5章-网络编程">第5章 网络编程</h4>

<ul>
  <li>Scket编程</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="k">func</span><span class="x"> </span><span class="n">Dial</span><span class="p">(</span><span class="n">net</span><span class="p">,</span><span class="x"> </span><span class="n">addr</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">conn</span><span class="p">,</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="c">//net:网络协议名字,addr:IP地址域名,而端口号以“:”的形式跟随在地址或域名的后面,端口号凯旋,连接成功返回连接对象，否则返回error</span><span class="x">
</span><span class="n">conn</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">net</span><span class="o">.</span><span class="n">Dial</span><span class="p">(</span><span class="s">"tcp"</span><span class="p">,</span><span class="x"> </span><span class="s">"192.168.0.10:2100"</span><span class="p">)</span><span class="x">
</span><span class="n">conn</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">net</span><span class="o">.</span><span class="n">Dial</span><span class="p">(</span><span class="s">"udp"</span><span class="p">,</span><span class="x"> </span><span class="s">"192.168.0.12:975"</span><span class="p">)</span><span class="x">
</span><span class="n">conn</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">net</span><span class="o">.</span><span class="n">Dial</span><span class="p">(</span><span class="s">"ip4:icmp"</span><span class="p">,</span><span class="x"> </span><span class="s">"www.baidu.com"</span><span class="p">)</span><span class="x">
</span><span class="n">conn</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">net</span><span class="o">.</span><span class="n">Dial</span><span class="p">(</span><span class="s">"ip4:1"</span><span class="p">,</span><span class="x"> </span><span class="s">"10.0.0.3"</span><span class="p">)</span><span class="x">
</span><span class="n">Dial</span><span class="p">()</span><span class="n">目前支持如下几种网络协议</span><span class="o">:</span><span class="n">tcp</span><span class="p">,</span><span class="x"> </span><span class="n">tcp4</span><span class="p">(</span><span class="n">仅限IPv4</span><span class="p">),</span><span class="x"> </span><span class="n">tcp6</span><span class="p">(</span><span class="n">仅限IPv6</span><span class="p">),</span><span class="x"> </span><span class="n">udp</span><span class="p">(</span><span class="n">仅限IPv4</span><span class="p">),</span><span class="x"> </span><span class="n">udp6</span><span class="p">(</span><span class="n">仅限IPv6</span><span class="p">),</span><span class="x"> </span><span class="n">ip</span><span class="p">,</span><span class="x"> </span><span class="n">ip4</span><span class="p">(</span><span class="n">仅限IPv4</span><span class="p">),</span><span class="x"> </span><span class="n">ip6</span><span class="p">(</span><span class="n">仅限IPv6</span><span class="p">)</span><span class="err">。</span><span class="x">
</span><span class="n">发送数据使用conn</span><span class="o">.</span><span class="n">Write</span><span class="p">()</span><span class="o">.</span><span class="n">接收使用Read</span><span class="p">()</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>ICMP 示例</li>
  <li>TCP示例</li>
  <li>HTTP编程</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="c">//net/http包的Client类型提供一下几个方法</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">c</span><span class="x"> </span><span class="o">*</span><span class="n">Client</span><span class="p">)</span><span class="x"> </span><span class="n">Get</span><span class="p">(</span><span class="n">url</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">r</span><span class="x"> </span><span class="o">*</span><span class="n">Response</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">c</span><span class="x"> </span><span class="o">*</span><span class="n">Client</span><span class="p">)</span><span class="x"> </span><span class="n">Post</span><span class="p">(</span><span class="n">url</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">bodyType</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">body</span><span class="x"> </span><span class="n">io</span><span class="o">.</span><span class="n">Reader</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">r</span><span class="x"> </span><span class="o">*</span><span class="n">Response</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x">
</span><span class="kt">error</span><span class="p">)</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">c</span><span class="x"> </span><span class="o">*</span><span class="n">Client</span><span class="p">)</span><span class="x"> </span><span class="n">PostForm</span><span class="p">(</span><span class="n">url</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="x"> </span><span class="n">url</span><span class="o">.</span><span class="n">Values</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">r</span><span class="x"> </span><span class="o">*</span><span class="n">Response</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">c</span><span class="x"> </span><span class="o">*</span><span class="n">Client</span><span class="p">)</span><span class="x"> </span><span class="n">Head</span><span class="p">(</span><span class="n">url</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">r</span><span class="x"> </span><span class="o">*</span><span class="n">Response</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">c</span><span class="x"> </span><span class="o">*</span><span class="n">Client</span><span class="p">)</span><span class="x"> </span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="x"> </span><span class="o">*</span><span class="n">Request</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">resp</span><span class="x"> </span><span class="o">*</span><span class="n">Response</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x">
</span><span class="c">//http.Client结构</span><span class="x">
</span><span class="k">type</span><span class="x"> </span><span class="n">Client</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
</span><span class="c">// Transport用于确定HTTP请求的创建机制。</span><span class="x">
</span><span class="c">// 如果为空，将会使用DefaultTransport</span><span class="x">
</span><span class="n">Transport</span><span class="x"> </span><span class="n">RoundTripper</span><span class="x">
</span><span class="c">// CheckRedirect定义重定向策略。</span><span class="x">
</span><span class="c">// 如果CheckRedirect不为空，客户端将在跟踪HTTP重定向前调用该函数。</span><span class="x">
</span><span class="c">// 两个参数req和via分别为即将发起的请求和已经发起的所有请求，最早的</span><span class="x">
</span><span class="c">// 已发起请求在最前面。</span><span class="x">
</span><span class="c">// 如果CheckRedirect返回错误，客户端将直接返回错误，不会再发起该请求。</span><span class="x">
</span><span class="c">// 如果CheckRedirect为空，Client将采用一种确认策略，将在10个连续</span><span class="x">
</span><span class="c">// 请求后终止</span><span class="x">
</span><span class="n">CheckRedirect</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="n">req</span><span class="x"> </span><span class="o">*</span><span class="n">Request</span><span class="p">,</span><span class="x"> </span><span class="n">via</span><span class="x"> </span><span class="p">[]</span><span class="o">*</span><span class="n">Request</span><span class="p">)</span><span class="x"> </span><span class="kt">error</span><span class="x">
</span><span class="c">// 如果Jar为空，Cookie将不会在请求中发送，并会</span><span class="x">
</span><span class="c">// 在响应中被忽略</span><span class="x">
</span><span class="n">Jar</span><span class="x"> </span><span class="n">CookieJar</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">Transport</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
</span><span class="c">// Proxy指定用于针对特定请求返回代理的函数。</span><span class="x">
</span><span class="c">// 如果该函数返回一个非空的错误，请求将终止并返回该错误。</span><span class="x">
</span><span class="c">// 如果Proxy为空或者返回一个空的URL指针，将不使用代理</span><span class="x">
</span><span class="n">Proxy</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="o">*</span><span class="n">Request</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="o">*</span><span class="n">url</span><span class="o">.</span><span class="n">URL</span><span class="p">,</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x">
</span><span class="c">// Dial指定用于创建TCP连接的dail()函数。</span><span class="x">
</span><span class="c">// 如果Dial为空，将默认使用net.Dial()函数</span><span class="x">
</span><span class="n">Dial</span><span class="x"> </span><span class="k">func</span><span class="p">(</span><span class="n">net</span><span class="p">,</span><span class="x"> </span><span class="n">addr</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">c</span><span class="x"> </span><span class="n">net</span><span class="o">.</span><span class="n">Conn</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x">
</span><span class="c">// TLSClientConfig指定用于tls.Client的TLS配置。</span><span class="x">
</span><span class="c">// 如果为空则使用默认配置</span><span class="x">
</span><span class="n">TLSClientConfig</span><span class="x"> </span><span class="o">*</span><span class="n">tls</span><span class="o">.</span><span class="n">Config</span><span class="x">
</span><span class="n">DisableKeepAlives</span><span class="x"> </span><span class="kt">bool</span><span class="x">
</span><span class="n">DisableCompression</span><span class="x"> </span><span class="kt">bool</span><span class="x">
</span><span class="c">// 如果MaxIdleConnsPerHost为非零值，它用于控制每个host所需要</span><span class="x">
</span><span class="c">// 保持的最大空闲连接数。如果该值为空，则使用DefaultMaxIdleConnsPerHost</span><span class="x">
</span><span class="n">MaxIdleConnsPerHost</span><span class="x"> </span><span class="kt">int</span><span class="x">
</span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">RoundTripper</span><span class="x"> </span><span class="k">interface</span><span class="x"> </span><span class="p">{</span><span class="x">
</span><span class="c">// RoundTrip执行一个单一的HTTP事务，返回相应的响应信息。</span><span class="x">
</span><span class="c">// RoundTrip函数的实现不应试图去理解响应的内容。如果RoundTrip得到一个响应，</span><span class="x">
</span><span class="c">// 无论该响应的HTTP状态码如何，都应将返回的err设置为nil。非空的err</span><span class="x">
</span><span class="c">// 只意味着没有成功获取到响应。</span><span class="x">
</span><span class="c">// 类似地，RoundTrip也不应试图处理更高级别的协议，比如重定向、认证和</span><span class="x">
</span><span class="c">// Cookie等。</span><span class="x">
</span><span class="c">//</span><span class="x">
</span><span class="c">// RoundTrip不应修改请求内容, 除非了是为了理解Body内容。每一个请求</span><span class="x">
</span><span class="c">// 的URL和Header域都应被正确初始化</span><span class="x">
</span><span class="n">RoundTrip</span><span class="p">(</span><span class="o">*</span><span class="n">Request</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="o">*</span><span class="n">Response</span><span class="p">,</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>RPC编程 net/rpc</li>
  <li>JSON处理  encoding/json   net/rpc/jsonrpc</li>
  <li>网站开发</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">
</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
	</span><span class="s">"io"</span><span class="x">
	</span><span class="s">"log"</span><span class="x">
	</span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="n">helloHandler</span><span class="p">(</span><span class="n">w</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">ResponseWriter</span><span class="p">,</span><span class="x"> </span><span class="n">r</span><span class="x"> </span><span class="o">*</span><span class="n">http</span><span class="o">.</span><span class="n">Request</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">io</span><span class="o">.</span><span class="n">WriteString</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="x"> </span><span class="s">"Hello, GO, Web."</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="n">http</span><span class="o">.</span><span class="n">HandleFunc</span><span class="p">(</span><span class="s">"/hello"</span><span class="p">,</span><span class="x"> </span><span class="n">helloHandler</span><span class="p">)</span><span class="x">
	</span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">ListenAndServe</span><span class="p">(</span><span class="s">":80"</span><span class="p">,</span><span class="x"> </span><span class="no">nil</span><span class="p">)</span><span class="x">
	</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
		</span><span class="n">log</span><span class="o">.</span><span class="n">Fatal</span><span class="p">(</span><span class="s">"ListenAndServe:"</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span><span class="x">
	</span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
</div>
<ul>
  <li>开发一个简单的相册网站 TODO</li>
</ul>

<h4 id="第6章-安全编程">第6章 安全编程</h4>

<ul>
  <li>数据加密:
    <ul>
      <li>单密钥的加密算法称为对称加密，整个系统由如下几个部分构成:需要加密的明文、加密算法和密钥。在加密和解密中，使用的密钥只有一个，常见的单密钥加密算法有DES、AES、RC4等</li>
      <li>双密钥称为非对称加密，系统由:需要加密的明文、加密算法、私有密钥和公密钥。在该系统中，私钥和公钥都可以被用作加密或解密，但是用私钥加密的明文，必须要对应的公钥解密，用公钥加密的明文，必须用对应的私钥解密。常见双密钥算法有RSA等。私钥不能暴漏。</li>
    </ul>
  </li>
  <li>数字签名</li>
  <li>数字证书</li>
  <li>PKI体系：PKI，全称公钥基础设施，是使用非对称加密理论，提供数字签名、加密、数字证书等服务的体系，一般包括权威认证机构（CA）、数字证书库、密钥备份及恢复系统、证书作废系统、应用接口（API）等。围绕PKI体系，建立了一些权威的、公益的机构。它们提供数字证书库、密钥备份及恢复系统、证书作废系统、应用接口等具体的服务。比如，企业的数字证书，需要向认证机构申请，以确保数字证书的安全。</li>
  <li>加密通信SSL(Secure Sockets Layer)
    <ol>
      <li>在浏览器中输入HTTPS协议的网址</li>
      <li>服务器向浏览器返回证书，浏览器检查改证书的合法性</li>
      <li>验证合法性。</li>
      <li>浏览器使用证书中的公钥加密一个随机对称密钥，并将加密后的密钥和使用密钥加密后的请求URL一起发送到服务器</li>
      <li>服务器用私钥解密随机对称密钥，并用获取的密钥解密加密的请求URL</li>
      <li>服务器把用户请求的网页用密钥加密，并返回用户</li>
      <li>用户浏览器用密钥解密服务器发来的网页数据，并将其显示</li>
    </ol>

    <ul>
      <li>示例</li>
    </ul>
  </li>
</ul>

<h4 id="第7章-工程管理">第7章 工程管理</h4>

<ul>
  <li>代码风格</li>
  <li>文档风格和管理</li>
  <li>单元测试与性能测试方法</li>
  <li>项目工程结构</li>
  <li>跨平台开发</li>
  <li>打包分发</li>
</ul>

<h4 id="第8章-开发工具">第8章 开发工具</h4>

<ul>
  <li>gedit</li>
</ul>

<h4 id="第9章-进阶话题">第9章 进阶话题</h4>

<ul>
  <li>对所有的接口进行反射，Type和Value:Type表达的是被反射的这个变量本身的类型信息，Value是该变量实例本身的信息。</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">
</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
	</span><span class="s">"fmt"</span><span class="x">
	</span><span class="s">"reflect"</span><span class="x">
</span><span class="p">)</span><span class="x">
</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
	</span><span class="k">var</span><span class="x"> </span><span class="n">x</span><span class="x"> </span><span class="kt">float64</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">3.4</span><span class="x">
	</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"type:"</span><span class="p">,</span><span class="x"> </span><span class="n">reflect</span><span class="o">.</span><span class="n">TypeOf</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"value:"</span><span class="p">,</span><span class="x"> </span><span class="n">reflect</span><span class="o">.</span><span class="n">ValueOf</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
</div>

<ul>
  <li>对结构的反射操作</li>
</ul>

<div class="language-go highlighter-rouge"><pre class="highlighter"><code><span class="k">type</span><span class="x"> </span><span class="n">T</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">A</span><span class="x"> </span><span class="kt">int</span><span class="x">
  </span><span class="n">B</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">
  </span><span class="n">t</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">T</span><span class="p">{</span><span class="m">203</span><span class="p">,</span><span class="x"> </span><span class="s">"mh203"</span><span class="p">}</span><span class="x">
  </span><span class="n">s</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">reflect</span><span class="o">.</span><span class="n">ValueOf</span><span class="p">(</span><span class="o">&amp;</span><span class="n">t</span><span class="p">)</span><span class="o">.</span><span class="n">Elem</span><span class="p">()</span><span class="x">
  </span><span class="n">typeOfT</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">s</span><span class="o">.</span><span class="n">Type</span><span class="p">()</span><span class="x">
  </span><span class="k">for</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">0</span><span class="p">;</span><span class="x"> </span><span class="n">i</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="n">s</span><span class="o">.</span><span class="n">NumField</span><span class="p">();</span><span class="x"> </span><span class="n">i</span><span class="o">++</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">f</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">s</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="x">
  </span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"%d: %s %s = %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="x"> </span><span class="n">i</span><span class="p">,</span><span class="x">
  </span><span class="n">typeOfT</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">Name</span><span class="p">,</span><span class="x"> </span><span class="n">f</span><span class="o">.</span><span class="n">Type</span><span class="p">(),</span><span class="x"> </span><span class="n">f</span><span class="o">.</span><span class="n">Interface</span><span class="p">())</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="c">//0:A int = 203</span><span class="x">
</span><span class="c">//1:B string = mh203</span><span class="x">
</span></code></pre>
</div>

    </article>
  </div>

  <div class="related">
    <h4>最新文章</h4>
    <ul class="related-posts">
      
        <li>
          <h5>
            <a href="/books/2017/08/18/%E5%86%85%E5%90%91%E8%80%85%E4%BC%98%E5%8A%BF.html">
              内向者优势
              <small>2017-08-18</small>
            </a>
          </h5>
        </li>
      
        <li>
          <h5>
            <a href="/architecture/2017/08/10/%E4%BA%BF%E7%BA%A7%E6%B5%81%E9%87%8F%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF.html">
              亿级流量网站架构核心技术
              <small>2017-08-10</small>
            </a>
          </h5>
        </li>
      
        <li>
          <h5>
            <a href="/architecture/2017/07/26/%E9%87%8D%E6%9E%84%E6%94%B9%E5%96%84%E6%97%A2%E6%9C%89%E4%BB%A3%E7%A0%81%E7%9A%84%E8%AE%BE%E8%AE%A1.html">
              重构-改善既有代码的设计
              <small>2017-07-26</small>
            </a>
          </h5>
        </li>
      
    </ul>
  </div>

  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'michaelygzhangblog';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          
<a href="mailto:g.zhangyg@gmail.com"><i class="svg-icon email"></i></a>


<a href="https://github.com/MichaelYgZhang"><i class="svg-icon github"></i></a>




<a href="https://www.twitter.com/michaelygzhang"><i class="svg-icon twitter"></i></a>


<a href="https://plus.google.com/115646538142388831563"><i class="svg-icon googleplus"></i></a>

        </footer>
      </div>
    </div>

    <div id="backToTop" class="backtoTop">
    	<i class="fa fa-hand-o-up fa-2x"></i>
    </div>

    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-84531968-1', 'auto');
		ga('send', 'pageview', {
		  'page': '/go/2017/01/12/Go.html',
		  'title': 'Go语言编程'
		});
	</script>
	<!-- End Google Analytics -->


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/simple-jekyll-search/1.1.5/jekyll-search.js" type="text/javascript"></script>
    <script src="/js/blog.js" type="text/javascript"></script>

    <script type="text/javascript">
          SimpleJekyllSearch({
            searchInput: document.getElementById('search-input'),
            resultsContainer: document.getElementById('results-container'),
            json: '/search.json',
            searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
            noResultsText: 'No results found',
            limit: 10,
            fuzzy: false,
            exclude: ['Welcome']
          })
    </script>
  </body>
</html>
